---
alwaysApply: true
description: Arquitetura e estrutura principal do projeto WhatsApp Webhook Mapper
---

# Arquitetura do Projeto - WhatsApp Webhook Mapper

## ğŸ“‹ VisÃ£o Geral
Este Ã© um sistema de mapeamento automÃ¡tico de eventos de webhook do WhatsApp que:
- Recebe eventos via webhook
- Analisa automaticamente a estrutura JSON
- Trunca campos grandes (base64, thumbnails)
- Gera schemas Zod e interfaces TypeScript
- Organiza tudo de forma estruturada

## ğŸ—ï¸ Estrutura de DiretÃ³rios

```
webhook-mapper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server/          # Backend principal
â”‚   â”‚   â”œâ”€â”€ services/    # ServiÃ§os de negÃ³cio
â”‚   â”‚   â”œâ”€â”€ routes/      # Rotas da API
â”‚   â”‚   â”œâ”€â”€ config/      # ConfiguraÃ§Ãµes
â”‚   â”‚   â”œâ”€â”€ utils/       # UtilitÃ¡rios
â”‚   â”‚   â”œâ”€â”€ database/    # Camada de dados
â”‚   â”‚   â””â”€â”€ queue/       # Processamento assÃ­ncrono
â”‚   â”œâ”€â”€ dashboard/       # Interface web
â”‚   â””â”€â”€ types/          # Tipos TypeScript
â”œâ”€â”€ schemas/            # Schemas gerados (auto)
â”œâ”€â”€ data/              # Banco SQLite
â”œâ”€â”€ logs/              # Logs da aplicaÃ§Ã£o
â””â”€â”€ docker/            # ConfiguraÃ§Ã£o Docker
```

## ğŸ¯ Tecnologias Principais
- **Backend**: Node.js 20+ + TypeScript + Fastify
- **ValidaÃ§Ã£o**: Zod para schemas
- **Queue**: BullMQ + Redis
- **Database**: SQLite para metadados
- **Frontend**: React + Vite + TailwindCSS
- **Deploy**: Docker + Docker Compose

## ğŸ“ ConvenÃ§Ãµes de Nomenclatura
- **Arquivos**: PascalCase para classes (`EventAnalyzer.ts`)
- **DiretÃ³rios**: kebab-case (`raw-samples/`)
- **VariÃ¡veis**: camelCase (`eventType`)
- **Constantes**: UPPER_SNAKE_CASE (`MAX_PAYLOAD_SIZE`)
- **Interfaces**: PascalCase com `I` prefix opcional (`EventStructure`)

## ğŸ”§ PadrÃµes de Desenvolvimento
- Sempre usar TypeScript strict mode
- Todos os serviÃ§os devem ter injeÃ§Ã£o de dependÃªncia
- Logs estruturados com contexto
- Error handling robusto
- Processamento assÃ­ncrono via queues
- Testes unitÃ¡rios e integraÃ§Ã£o